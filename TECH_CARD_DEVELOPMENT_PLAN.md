# 技術卡系統開發計畫 (起源方案二核心版)

> 更新日期：2026-01-29
> 狀態：**Phase 1-3 已完成，進入 Phase 4：技術樹擴展**
> 理論基礎：《The Secret of Our Success》、《The WEIRDest People in the World》

---

## 一、資源邏輯重構：昂貴組織開發權衡

為了符合起源企劃書並優化遊戲策略，我們將資源產出調整為：

### 1.1 三軌道產出 (Resource Mapping)

| 投資類型 | 產出資源 | 用途 | 主題對應 |
| :--- | :--- | :--- | :--- |
| **大腦 (Brain)** | **AP (技術點)** | **解鎖/級技術路徑** | 智慧與文化累積 |
| **消化 (Guts)** | **能量 (Energy)** | 維持生命與下回預算 | 代謝能量效率 |
| **肌肉 (Muscle)** | **行動點 (Action Points)** | 掠奪、探索、防禦、解鎖行動 | 實體執行力 |

### 1.2 資源特性

- **AP (大腦產出)**：可跨回合累積，專門用於「技術樹」升級。
- **行動點 (肌肉產出)**：本回合使用，回合結束歸零。
- **策略核心**：玩家必須決定是要透過大腦獲取「長期技術優勢」，還是透過肌肉獲得「短期競爭優勢」。

---

## 二、文化複雜度分數 (CCS) 系統

### 2.1 基礎積分

| 等級 | 分數 |
|--|--|
| Tier 1 | 1 分 |
| Tier 2 | 2 分 |
| Tier 3 | 3 分 |
| Tier 4 | 5 分 |
| Tier V | 8-10 分 |

### 2.2 組合加成

- **火與食** (火的控制 + 烹飪技術 + 食物保存): +5 分
- **狩獵專精** (石器製作 + 長矛狩獵 + 複雜工具): +5 分
- **社會結構** (語言 + 族群認同 + 社會規範): +5 分
- **知識體系** (民俗生物學 + 口語傳承 + 教學系統): +7 分

### 2.3 勝利條件

- 累積指定 CCS（預設 30，可自訂）即達成「盧比孔門檻」獲勝。

---

## 三、開發進度追蹤

### Phase 1：核心邏輯改版 [✓ 已完成]

- [x] 修改 `TECH_CARDS` 加入 `ccsValue` 屬性
- [x] 重構 `confirmInvest` 的資源產出映射
- [x] 實作 `calculateCCS()` 與 `checkComboBonuses()`
- [x] 勝利條件判定

### Phase 2：UI 同步 [✓ 已完成]

- [x] 投資畫面顯示已生效的技術效果
- [x] 個人結算畫面顯示潛在行動收益
- [x] 回合結算畫面顯示下回合預期能量

### Phase 3：平衡與機制調整 [✓ 已完成 2026-01-29]

- [x] **技術與環境事件的交互作用**
  - 新增負面事件：冰河時期、瘟疫蔓延
  - 技術可抵消事件效果（火的控制→冰河、民俗生物學→瘟疫）
  - 個人化乘數系統 (`getEffectiveMultipliers`)
  - 視覺回饋：Green=抵消成功, Red=懲罰中, Blue=增益
- [x] **遊戲規則自訂化**
  - 可自訂每回合基礎能量
  - 可自訂勝利目標 CCS
  - 可啟用「強制消化投資」生存規則
  - 肌肉行動點回合重置

---

## 四、Phase 4：技術樹擴展（選項三方案）

> 狀態：**規劃中**
> 目標：增加策略深度，延長合理遊戲時間

### 4.1 設計目標

1. 保留現有四線結構（消化/工具/社會/環境）
2. 新增 1-2 個「匯聚點」技術，需跨線前置
3. 調整 AP 成本以延長遊戲節奏

### 4.2 新增技術卡

| 技術名稱 | Tier | 成本 | CCS | 前置需求 | 效果 |
|---|---|---|---|---|---|
| **人造物系統** | 4 | 10 | 5 | 複雜工具 + 食物保存 | 每回合 +3 能量，肌肉成本 -1 |
| **累積文化** | 5 | 15 | 10 | 任兩張 Tier 4 技術 | 每回合額外獲得已解鎖技術數量的 CCS |

### 4.3 成本調整

| 等級 | 原成本 | 新成本 |
|--|--|--|
| Tier 1 | 2 | 3 |
| Tier 2 | 3 | 5 |
| Tier 3 | 5 | 8 |
| Tier 4 | 8 | 12 |
| Tier 5 | - | 15 |

### 4.4 實作任務

- [ ] 更新 `TECH_CARDS` 新增匯聚點技術
- [ ] 修改解鎖邏輯支援「任一前置」與「全部前置」
- [ ] 更新 `checkComboBonuses` 支援新組合
- [ ] 調整現有技術卡成本
- [ ] 新增 Tier 5 教學系統 UI

---

## 五、參考資料

- 原始企劃：`Game of Cultural Evolution - 方案二 昂貴組織交易.md`
- 理論基礎：`The Secret of Our Success` by Joseph Henrich
